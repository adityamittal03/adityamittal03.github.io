<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="author" content="Liste - {{ .Site.BaseURL }}">
    <title>{{ if eq .IsHome true }}{{ .Site.Title }}{{ else }}{{ .Title }} | {{ .Site.Title }}{{ end }}</title>
    <meta name="description" content="{{ if ne .Description "" }}{{ .Description }}{{ else }}{{ .Site.Params.description }}{{ end }}">
    {{ template "_internal/opengraph.html" . }}
    {{ template "_internal/schema.html" . }}
    {{ template "_internal/google_analytics.html" . }}    <link rel="canonical" href="{{ .Permalink }}">
    
    <!-- Favicons -->
    <link rel="icon" type="image/x-icon" href="{{ .Site.BaseURL }}/icon_test.ico">
    <link rel="icon" type="image/x-icon" sizes="16x16" href="{{ .Site.BaseURL }}/icon_test.ico">
    <link rel="icon" type="image/x-icon" sizes="32x32" href="{{ .Site.BaseURL }}/icon_test.ico">
    <link rel="apple-touch-icon" sizes="180x180" href="{{ .Site.BaseURL }}/icon_test.ico">
    <link rel="icon" type="image/x-icon" sizes="192x192" href="{{ .Site.BaseURL }}/icon_test.ico">
    <link rel="icon" type="image/x-icon" sizes="512x512" href="{{ .Site.BaseURL }}/icon_test.ico">
    <link rel="manifest" href="{{ .Site.BaseURL }}/site.webmanifest">
    
    <link rel="dns-prefetch" href="https://www.google-analytics.com">
    <link href="https://www.google-analytics.com" rel="preconnect" crossorigin>
    <link rel="alternate" type="application/atom+xml" title="{{ .Site.Title }}" href="{{ .Site.BaseURL }}/atom.xml" />    <link rel="alternate" type="application/json" title="{{ .Site.Title }}" href="{{ .Site.BaseURL }}/feed.json" />    <link rel="shortcut icon" type="image/png" href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNk+A8AAQUBAScY42YAAAAASUVORK5CYII=">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Source+Sans+Pro:ital,wght@0,400;0,500;0,600;0,700;1,400;1,500;1,600&family=Source+Code+Pro:wght@400;500;600&display=swap">
    {{ $styles := resources.Get "scss/styles.scss" | toCSS (dict "outputStyle" "compressed") | minify }}
    <style>{{ $styles.Content | safeCSS }}</style>
    <style>
      /* Allow wide tables inside collapsible sections to scroll horizontally */
      .paper-content { overflow-x: auto; }
      .paper-content table { width: max-content; max-width: none; display: block; }
      .paper-content th, .paper-content td { white-space: nowrap; }
      /* Keep visualization images reasonably sized side-by-side */
      .paper-content table img { max-height: 280px; height: auto; max-width: 100%; }
      /* Nicer spacing when multiple tables appear back-to-back */
      .paper-content table + table { margin-top: 0.5rem; }
      /* Normalize sizes for Drake word plots so pairs match visually */
      .paper-content table img[src*="drake-career-analysis/plots/career_words.png"],
      .paper-content table img[src*="drake-career-analysis/plots/career_word_cloud.png"],
      .paper-content table img[src*="drake-career-analysis/plots/album_words.png"],
      .paper-content table img[src*="drake-career-analysis/plots/album_word_cloud.png"],
      .paper-content table img[src*="drake-career-analysis/plots/word_cloud_g.png"],
      .paper-content table img[src*="drake-career-analysis/plots/word_cloud_b.png"] {
        width: 100%;
        height: 260px;
        max-height: none;
        object-fit: contain;
        display: block;
      }
      /* Slightly narrower for first Part 4 word cloud */
      .paper-content table img[src*="drake-career-analysis/plots/career_word_cloud.png"] {
        max-width: 90%;
        margin: 0 auto;
      }
      /* Slightly larger for Part 5 sentiment word clouds */
      .paper-content table img[src*="drake-career-analysis/plots/word_cloud_g.png"],
      .paper-content table img[src*="drake-career-analysis/plots/word_cloud_b.png"] {
        height: 300px;
      }
      /* Styled block for R output */
      .r-output {
        background: var(--paper-bg);
        border-left: 4px solid var(--accent-color);
        padding: 0.5rem 0.75rem;
        margin: 0.5rem 0 0.75rem;
        border-radius: 4px;
        font-family: 'Source Code Pro', Monaco, Consolas, 'Lucida Console', monospace;
        font-size: 0.9rem;
        line-height: 1.4;
        font-weight: 400;
      }
      .r-output pre { background: transparent; margin: 0; font-size: inherit; line-height: inherit; font-weight: inherit; }
      .r-output code { font-size: inherit; font-weight: inherit; }
      .r-output *, .r-output strong, .r-output b, .r-output em, .r-output i { font-size: inherit; font-weight: 400; font-style: normal; }

      /* Dataset card styling used across project pages */
      .dataset-card {
        border: 1px solid var(--border-color);
        background: var(--paper-bg);
        border-radius: 6px;
        padding: 0.75rem 1rem;
        margin: 0.5rem 0 1rem;
      }

      /* Responsive embedded HTML visualizations (e.g., choropleths) */
      .embed-frame {
        width: 100%;
        height: 420px;
        border: 1px solid var(--border-color);
        border-radius: 6px;
        background: var(--bg-secondary);
      }
      @media (min-width: 768px) {
        .embed-frame { height: 520px; }
      }
    </style>
  
    {{ if .IsHome -}}
    <script type="application/ld+json">
    {
        "@context": "http://schema.org",
        "@type": "WebSite",
        "name": "{{ .Site.Title }}",
        "url": "{{ .Site.BaseURL }}",
        "description": "{{ .Site.Params.description }}",
        "thumbnailUrl": "{{ .Site.Params.logo | absURL }}",
        "license": "{{ .Site.Params.Copyright }}"
    }
    </script>
    {{ else if .IsPage }}
    {{ $author :=  or (.Params.author) (.Site.Author.name) }}
    {{ $org_name :=  .Site.Title }}
    <script type="application/ld+json">
    {
        "@context": "http://schema.org",
        "@type": "BlogPosting",
        "articleSection": "{{ .Section }}",
        "name": "{{ .Title | safeJS }}",
        "headline": "{{ .Title | safeJS }}",
        "alternativeHeadline": "{{ .Params.lead }}",
        "description": "{{ if .Description }}{{ .Description | safeJS }}{{ else }}{{if .IsPage}}{{ .Summary  }}{{ end }}{{ end }}",
        "inLanguage": {{ .Site.LanguageCode | default "en-us" }},
        "isFamilyFriendly": "true",
        "mainEntityOfPage": {
            "@type": "WebPage",
            "@id": "{{ .Permalink }}"
        },
        "author" : {
            "@type": "Person",
            "name": "{{ $author }}"
        },
        "creator" : {
            "@type": "Person",
            "name": "{{ $author }}"
        },
        "accountablePerson" : {
            "@type": "Person",
            "name": "{{ $author }}"
        },
        "copyrightHolder" : "{{ $org_name }}",
        "copyrightYear" : "{{ .Date.Format "2006" }}",
        "dateCreated": "{{ .Date.Format "2006-01-02T15:04:05.00Z" | safeHTML }}",
        "datePublished": "{{ .PublishDate.Format "2006-01-02T15:04:05.00Z" | safeHTML }}",
        "dateModified": "{{ .Lastmod.Format "2006-01-02T15:04:05.00Z" | safeHTML }}",
        "publisher":{
            "@type":"Organization",
            "name": {{ $org_name }},
            "url": {{ .Site.BaseURL }},
            "logo": {
                "@type": "ImageObject",
                "url": "{{ .Site.Params.logo | absURL }}",
                "width":"32",
                "height":"32"
            }
        },
        "image": {{ if .Params.images }}[{{ range $i, $e := .Params.images }}{{ if $i }}, {{ end }}{{ $e | absURL }}{{ end }}]{{ else}}{{.Site.Params.logo | absURL }}{{ end }},
        "url" : "{{ .Permalink }}",
        "wordCount" : "{{ .WordCount }}",
        "genre" : [ {{ range $index, $tag := .Params.tags }}{{ if $index }}, {{ end }}"{{ $tag }}" {{ end }}],
        "keywords" : [ {{ range $index, $tag := .Params.tags }}{{ if $index }}, {{ end }}"{{ $tag }}" {{ end }}]
    }
    </script>
    {{ end }}     <script>
        document.addEventListener('DOMContentLoaded', () => {
            const burger = document.querySelector('.burger');
            const nav = document.querySelector('.nav-menu');
            const header = document.querySelector('header');
        
            if (burger) {
                burger.addEventListener('click', () => {
                    nav.classList.toggle('active');
                    header.classList.toggle('menu-open');
                });
        
                // Close menu when clicking outside
                document.addEventListener('click', (e) => {
                    if (!header.contains(e.target) && nav.classList.contains('active')) {
                        nav.classList.remove('active');
                        header.classList.remove('menu-open');
                    }
                });
            }
        });
    </script>
    <script src="{{ .Site.BaseURL }}/js/main.js"></script>
    
    <!-- Dark mode functionality -->
    <script>
        // Dark mode toggle functionality
        document.addEventListener('DOMContentLoaded', function() {
            const darkModeToggle = document.getElementById('dark-mode-toggle');
            const html = document.documentElement;
            
            // Check for saved theme preference or default to light mode
            const currentTheme = localStorage.getItem('theme') || 'light';
            html.setAttribute('data-theme', currentTheme);
            
            // Update button state
            updateButtonState(currentTheme);
            
            // Toggle theme when button is clicked
            darkModeToggle.addEventListener('click', function() {
                const currentTheme = html.getAttribute('data-theme');
                const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
                
                html.setAttribute('data-theme', newTheme);
                localStorage.setItem('theme', newTheme);
                updateButtonState(newTheme);
            });
            
            function updateButtonState(theme) {
                if (theme === 'dark') {
                    darkModeToggle.setAttribute('aria-label', 'Switch to light mode');
                    darkModeToggle.setAttribute('title', 'Switch to light mode');
                } else {
                    darkModeToggle.setAttribute('aria-label', 'Switch to dark mode');
                    darkModeToggle.setAttribute('title', 'Switch to dark mode');
                }
            }
        });
    </script>
  </head>
